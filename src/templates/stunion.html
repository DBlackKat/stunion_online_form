{% extends "base.html" %}
{% load i18n %}
{% load static %}

{% block content %}
{% if request.user.is_authenticated %}
<a href="{% url 'auth_logout' %}">登出</a>
	<h1>學聯會回饋管理頁面</h1>
	<div>
	<span style="background-color:#FFA69E">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;未讀取&nbsp;&nbsp;
	<span style="background-color:#B8F2E6">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;處理中&nbsp;&nbsp;
	<span style="background-color:#FAF3DD">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;已完成&nbsp;&nbsp;
	</div>
	<div>
		<form action="" method="post">{% csrf_token %}	
			<select  name="list_selector" > 
				<option value="all">全</option>
				<option value="unread">未讀取</option>
				<option value="handling">處理中</option>
				<option value="finished">已完成</option>
			</select>
		<input type="submit" name="selector" value="篩選"/>
		</form>
	</div>
	<div>
		<table class='table'>
			{% if reflection_list %}
				<tr>
					<td>狀態</td>
					<td>時間</td>
					<td>名字</td>
					<td>信箱</td>
					<td>類別</td>
					<td>內容</td>
					<td>建議</td>
					<td>詳細</td>
					<td>刪除</td>
				</tr>

				{% for object in reflection_list %}
					{% if object.state == 0 %}
					<tr class="unread_reflection" bgcolor="FFA69E">
					{% elif object.state == 1 %}
					<tr class="read_reflection" bgcolor="B8F2E6">
					{% elif object.state == 2 %}
					<tr class="finished_reflection" bgcolor="FAF3DD">
					{% else %}
					<tr>
					{% endif %}

					<td>
						{% if object.state == 0 %}
						狀態：未讀
						{% elif object.state == 1 %}
						狀態：處理中
						{% elif object.state == 2 %}
						狀態：已完成
						{% else %}
						狀態 ：
						{% endif %}
					</td>
					<td>{{object.timestamp}}</td>
					<td>{{object.name}}</td>
					<td>{{object.email}}</td>
					<td>{{object.category}}</td>
					<td>{{object.content}}</td>
					<td>{{object.advice}}</td>
					<td><a href='/stunion/{{object.id}}'>詳細</a></td>
					<td><a href='/stunion/{{object.id}}/delete'>刪除</a></td>
					</tr>					
				{% endfor %}
			{% else %}
				<tr><td>沒有任何意見喔</td></tr>	
			{% endif %}

		</table>
	</div>


{% endif %}
{% endblock %}
